(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{DFav:function(t,e,i){"use strict";i.d(e,"a",function(){return x});var n=i("D0XW");const s=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();var o=i("mlxB"),r=i("zx2A");class c{constructor(t,e,i,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=i,this.scheduler=n}call(t,e){return e.subscribe(new a(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class a extends r.b{constructor(t,e,i,n,s){super(t),this.absoluteTimeout=e,this.waitFor=i,this.withObservable=n,this.scheduler=s,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(r.c)(e,new r.a(t)))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(a.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var l=i("z6cu");function d(t,e=n.a){return function(t,e,i=n.a){return n=>{let s=Object(o.a)(t),r=s?+t-i.now():Math.abs(t);return n.lift(new c(r,s,e,i))}}(t,Object(l.a)(new s),e)}var h=i("JIr8"),u=i("lJxs"),b=i("2Vo4");class p{constructor(t){this.originalError=t}}class g extends p{}class f extends p{}var v=i("AytR"),m=i("fXoL"),S=i("tk/3");let C=(()=>{class t{constructor(t){this.http=t,this.url=v.a.base_url}handleError(t){return 400===t.status?Object(l.a)(new g(t)):404===t.status?Object(l.a)(new f(t)):Object(l.a)(new p(t))}}return t.\u0275fac=function(e){return new(e||t)(m.Xb(S.a))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t extends C{constructor(){super(...arguments),this.animeObserver=new b.a([]),this.animes=[],this.ovas=[],this.specials=[],this.movies=[],this.episodes=[],this.lastSearch=[],this.lastQuery="",this.lastAnimeOpened=null,this.lastRoute=null}setAnimes(t){this.animes=t,this.animeObserver.next(t)}setOvas(t){this.ovas=t}setSpecials(t){this.specials=t}setMovies(t){this.movies=t}setEpisodes(t){this.episodes=t}fetchEpisodes(){return this.http.get(`${this.url}/animes/episodes`).pipe(d(1e4),Object(h.a)(this.handleError))}fetchAnimes(){return this.http.get(`${this.url}/animes/latest`).pipe(d(1e4),Object(h.a)(this.handleError),Object(u.a)(t=>(this.setAnimes(t),t)))}fetchSpecials(){return this.http.get(`${this.url}/animes/specials`).pipe(d(1e4),Object(h.a)(this.handleError))}fetchOvas(){return this.http.get(`${this.url}/animes/ovas`).pipe(d(1e4),Object(h.a)(this.handleError))}fetchMovies(){return this.http.get(`${this.url}/animes/movies`).pipe(d(1e4),Object(h.a)(this.handleError))}getAnimeInfo(t,e){return this.http.get(`${this.url}/animes/${t}/${e}`).pipe(d(1e4),Object(h.a)(this.handleError))}getEpisoderServers(t){return this.http.get(`${this.url}/animes/episodes/${t}`).pipe(d(1e4),Object(h.a)(this.handleError))}search(t){return this.http.get(`${this.url}/animes/search/${t}`).pipe(d(1e4),Object(h.a)(this.handleError))}}return t.\u0275fac=function(e){return O(e||t)},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const O=m.Vb(x)},KIY9:function(t,e,i){"use strict";i.d(e,"a",function(){return f});var n=i("sJtc"),s=i("fXoL"),o=i("2ChS"),r=i("DFav"),c=i("tyNb"),a=i("ofXK"),l=i("FKr1"),d=i("Xa2L"),h=i("UyyX");function u(t,e){if(1&t){const t=s.Ub();s.Tb(0,"span",5),s.ac("click",function(){s.sc(t);const i=e.$implicit;return s.ec(2).openServer(i)}),s.Bc(1),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(1),s.Cc(t.title)}}function b(t,e){if(1&t&&(s.Rb(0),s.Tb(1,"div",3),s.zc(2,u,2,1,"span",4),s.Sb(),s.Qb()),2&t){const t=s.ec();s.Cb(2),s.jc("ngForOf",t.servers)}}function p(t,e){1&t&&(s.Tb(0,"div",6),s.Ob(1,"mat-spinner",7),s.Sb()),2&t&&(s.Cb(1),s.jc("diameter",40))}function g(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",6),s.Tb(1,"error",8),s.ac("buttonClicked",function(){return s.sc(t),s.ec().getServers()}),s.Sb(),s.Sb()}}let f=(()=>{class t{constructor(t,e,i,o){this.animeService=t,this.router=e,this.bottomSheet=i,this.sheetData=o,this.Status=n.b,this.currentStatus=n.b.loading,this.servers=[],this.serverSelected=new s.o}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}ngOnInit(){this.episode=this.sheetData.episode,this.episode.servers?(this.servers=this.episode.servers,this.currentStatus=n.b.loaded):this.getServers(),this.subscription=this.bottomSheet.afterDismissed().subscribe(t=>{this.requestSubscription&&this.requestSubscription.unsubscribe()})}openServer(t){const e={queryParams:{url:t.code}};this.serverSelected.emit(),this.animeService.lastRoute=this.router.url,this.router.navigate(["/watch"],e)}getServers(){this.currentStatus=n.b.loading,this.requestSubscription=this.animeService.getEpisoderServers(this.episode.id).subscribe(t=>{this.servers=t,this.currentStatus=n.b.loaded},()=>{this.currentStatus=n.b.error})}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(r.a),s.Nb(c.c),s.Nb(o.d),s.Nb(o.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-servers"]],outputs:{serverSelected:"serverSelected"},decls:6,vars:4,consts:[[1,"bottom-sheet",3,"ngSwitch"],[4,"ngSwitchCase"],["class","info",4,"ngSwitchCase"],[1,"servers-container"],["mat-ripple","",3,"click",4,"ngFor","ngForOf"],["mat-ripple","",3,"click"],[1,"info"],[3,"diameter"],[3,"buttonClicked"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"h3"),s.Bc(2,"Select an option"),s.Sb(),s.zc(3,b,3,1,"ng-container",1),s.zc(4,p,2,1,"div",2),s.zc(5,g,2,0,"div",2),s.Sb()),2&t&&(s.jc("ngSwitch",e.currentStatus),s.Cb(3),s.jc("ngSwitchCase",e.Status.loaded),s.Cb(1),s.jc("ngSwitchCase",e.Status.loading),s.Cb(1),s.jc("ngSwitchCase",e.Status.error))},directives:[a.m,a.n,a.j,l.q,d.b,h.a],styles:[".bottom-sheet[_ngcontent-%COMP%]{min-height:200px;padding:10px}.servers-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.servers-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:40%;border:1px solid var(--primary);padding:7px 10px;cursor:pointer;border-radius:20px;text-align:center;font-size:16px;margin-bottom:15px}.info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:150px;width:100%}"]}),t})()},UyyX:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("fXoL"),s=i("NFeN"),o=i("FKr1");let r=(()=>{class t{constructor(){this.buttonClicked=new n.o}ngOnInit(){}onClick(){this.buttonClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Hb({type:t,selectors:[["error"]],outputs:{buttonClicked:"buttonClicked"},decls:5,vars:0,consts:[[1,"content"],["matRipple","",3,"click"]],template:function(t,e){1&t&&(n.Tb(0,"div",0),n.Tb(1,"mat-icon"),n.Bc(2,"error_outline"),n.Sb(),n.Tb(3,"span",1),n.ac("click",function(){return e.onClick()}),n.Bc(4,"Retry"),n.Sb(),n.Sb())},directives:[s.a,o.q],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--secondary-text-color);margin-bottom:25px;transform:scale(2.25)}.content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;font-size:16px;padding:5px 15px;border-radius:20px;width:50px;border:2px solid var(--primary)}"]}),t})()},iirt:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("2Vo4"),s=i("fXoL");let o=(()=>{class t{constructor(){this.FAVORITES_KEY="akiyama_favorites",this._favorites=[],this.favorites=new n.a([]),this.getFavorites()}addFavorite(t){this._favorites.push(t),this.favorites.next(this._favorites),localStorage.setItem(this.FAVORITES_KEY,JSON.stringify(this._favorites))}isFavorite(t){for(let e of this._favorites)if(e.id==t.id)return!0;return!1}removeFavorite(t){this._favorites=this._favorites.filter(e=>e.id!=t.id),this.favorites.next(this._favorites),localStorage.setItem(this.FAVORITES_KEY,JSON.stringify(this._favorites))}getFavorites(){const t=localStorage.getItem(this.FAVORITES_KEY);if(!t)return;const e=JSON.parse(t);this._favorites=e,this.favorites.next(this._favorites)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},kkd5:function(t,e,i){"use strict";i.d(e,"a",function(){return k});var n=i("KIY9"),s=i("0IaG"),o=i("sJtc"),r=i("fXoL"),c=i("2ChS"),a=i("+wKw"),l=i("DFav"),d=i("iirt"),h=i("ofXK"),u=i("bTqV"),b=i("NFeN"),p=i("FKr1");let g=(()=>{class t{constructor(){this.icon="",this.label=""}ngOnInit(){if(!this.icon||!this.label)throw new Error("Missing attributes")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["icon-button"]],inputs:{icon:"icon",label:"label"},decls:5,vars:2,consts:[["mat-ripple","",1,"button-container"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"mat-icon"),r.Bc(2),r.Sb(),r.Tb(3,"span"),r.Bc(4),r.Sb(),r.Sb()),2&t&&(r.Cb(2),r.Cc(e.icon),r.Cb(2),r.Cc(e.label))},directives:[p.q,b.a],styles:[".button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;display:inline-flex;padding:5px 10px;cursor:pointer;transition:background-color .3s ease}.button-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-bottom:5px}.button-container[_ngcontent-%COMP%]:hover{background-color:var(--background)}"]}),t})();var f=i("Xa2L");function v(t,e){if(1&t&&(r.Tb(0,"div",19),r.Tb(1,"span"),r.Bc(2),r.Sb(),r.Sb()),2&t){const t=e.$implicit;r.Cb(2),r.Cc(t)}}function m(t,e){if(1&t&&(r.Tb(0,"span"),r.Bc(1),r.Sb()),2&t){const t=r.ec(2).$implicit;r.Cb(1),r.Dc("Episode ",t.episode,"")}}function S(t,e){if(1&t&&(r.Tb(0,"span"),r.Bc(1),r.Sb()),2&t){const t=r.ec(2).$implicit;r.Cb(1),r.Dc("Next episode ",t.nextEpisodeDate,"")}}function C(t,e){if(1&t){const t=r.Ub();r.Tb(0,"div",22),r.ac("click",function(){r.sc(t);const e=r.ec().$implicit;return r.ec(3).openServersBottomSheet(e)}),r.zc(1,m,2,1,"span",23),r.zc(2,S,2,1,"span",23),r.Sb()}if(2&t){const t=r.ec().$implicit;r.Cb(1),r.jc("ngIf",!t.nextEpisodeDate),r.Cb(1),r.jc("ngIf",t.nextEpisodeDate)}}function x(t,e){if(1&t&&(r.Rb(0),r.zc(1,C,3,2,"div",21),r.Qb()),2&t){const t=e.$implicit,i=e.index;r.Cb(1),r.jc("ngIf",!(!t.nextEpisodeDate||0!=i)||0!=i)}}function O(t,e){if(1&t&&(r.Rb(0),r.zc(1,x,2,1,"ng-container",20),r.Qb()),2&t){const t=r.ec(2);r.Cb(1),r.jc("ngForOf",t.anime.episodes)}}function w(t,e){1&t&&(r.Tb(0,"div",24),r.Ob(1,"mat-spinner",25),r.Sb()),2&t&&(r.Cb(1),r.jc("diameter",30))}const _=function(t){return{favorite:t}},y=function(t){return{expanded:t}};function M(t,e){if(1&t){const t=r.Ub();r.Rb(0),r.Tb(1,"div",4),r.Ob(2,"img",5),r.Sb(),r.Tb(3,"div",6),r.Tb(4,"div",7),r.Ob(5,"img",5),r.Tb(6,"div",8),r.Tb(7,"h2"),r.Bc(8),r.Sb(),r.Tb(9,"span"),r.Bc(10),r.Sb(),r.Sb(),r.Sb(),r.Tb(11,"div",9),r.Tb(12,"icon-button",10),r.ac("click",function(){return r.sc(t),r.ec().favoritesToggle()}),r.Sb(),r.Sb(),r.Tb(13,"div",11),r.Tb(14,"p",12),r.Bc(15),r.Sb(),r.Tb(16,"button",13),r.ac("click",function(){return r.sc(t),r.ec().expand()}),r.Bc(17,"More"),r.Sb(),r.Sb(),r.Tb(18,"div",14),r.zc(19,v,3,1,"div",15),r.Sb(),r.Tb(20,"div",16),r.Tb(21,"h3"),r.Bc(22,"Episodes"),r.Sb(),r.zc(23,O,2,1,"ng-container",17),r.zc(24,w,2,1,"ng-template",null,18,r.Ac),r.Sb(),r.Sb(),r.Qb()}if(2&t){const t=r.pc(25),e=r.ec();r.Cb(2),r.kc("src","data:image/png;base64,",e.anime.poster,"",r.uc),r.Cb(3),r.kc("src","data:image/png;base64,",e.anime.poster,"",r.uc),r.Cb(3),r.Cc(e.anime.title),r.Cb(2),r.Cc(e.anime.debut),r.Cb(2),r.jc("ngClass",r.mc(12,_,e.isFavorite))("label",e.isFavorite?e.label.favorite:e.label.notFavorite)("icon",e.isFavorite?e.icons.favorite:e.icons.notFavorite),r.Cb(2),r.jc("ngClass",r.mc(14,y,e.expandedSynopsis)),r.Cb(1),r.Dc(" ",e.anime.synopsis," "),r.Cb(4),r.jc("ngForOf",e.anime.genres),r.Cb(4),r.jc("ngIf",e.episodeStatus==e.Status.loaded)("ngIfElse",t)}}function T(t,e){1&t&&(r.Tb(0,"div",26),r.Ob(1,"mat-spinner",25),r.Sb()),2&t&&(r.Cb(1),r.jc("diameter",40))}let k=(()=>{class t{constructor(t,e,i,n,s,r){this.dialogRef=t,this.bottomSheet=e,this.darkModeService=i,this.animeService=n,this.favoritesService=s,this.modalData=r,this.Status=o.b,this.currentStatus=o.b.loading,this.isFavorite=!1,this.expandedSynopsis=!1,this.episodeStatus=o.b.loading,this.label={favorite:"Remove from favorites",notFavorite:"Add to favorites"},this.icons={favorite:"favorite",notFavorite:"favorite_border"}}ngOnInit(){this.anime=this.modalData.anime,this.animeService.lastAnimeOpened=this.anime,this.currentStatus=o.b.loaded,this.isFavorite=this.favoritesService.isFavorite(this.anime),this.isFavorite?this.getAnimeInfo():this.episodeStatus=o.b.loaded}getAnimeInfo(){const t=this.anime.id.split("/").pop();this.animeService.getAnimeInfo(t,this.anime.title).subscribe(t=>{this.anime.episodes=t.episodes,this.episodeStatus=o.b.loaded},()=>{this.episodeStatus=o.b.loaded})}openServersBottomSheet(t){if(t.nextEpisodeDate)return;const e=this.bottomSheet.open(n.a,{panelClass:this.darkModeService.enabled.value?"bottomSheet-dark":"",data:{episode:t}});e.instance.serverSelected.subscribe(t=>{e.dismiss(),this.close()})}favoritesToggle(){this.isFavorite?this.favoritesService.removeFavorite(this.anime):this.favoritesService.addFavorite(this.anime),this.isFavorite=this.favoritesService.isFavorite(this.anime)}expand(){this.expandedSynopsis=!this.expandedSynopsis}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s.d),r.Nb(c.b),r.Nb(a.a),r.Nb(l.a),r.Nb(d.a),r.Nb(s.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-anime-detail"]],decls:6,vars:3,consts:[[1,"dialog",3,"ngSwitch"],["mat-icon-button","",1,"close",3,"click"],[4,"ngSwitchCase"],["class","loading",4,"ngSwitchCase"],[1,"background"],[3,"src"],[1,"content"],[1,"header"],[1,"title"],[1,"buttons"],[3,"ngClass","label","icon","click"],[1,"synopsis-container"],[3,"ngClass"],["mat-button","","color","primary",3,"click"],[1,"genres-container"],["class","genre",4,"ngFor","ngForOf"],[1,"episodes-container"],[4,"ngIf","ngIfElse"],["episodeSpinner",""],[1,"genre"],[4,"ngFor","ngForOf"],["class","episode","mat-ripple","",3,"click",4,"ngIf"],["mat-ripple","",1,"episode",3,"click"],[4,"ngIf"],[1,"episode-loading"],[3,"diameter"],[1,"loading"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"button",1),r.ac("click",function(){return e.close()}),r.Tb(2,"mat-icon"),r.Bc(3,"close"),r.Sb(),r.Sb(),r.zc(4,M,26,16,"ng-container",2),r.zc(5,T,2,1,"div",3),r.Sb()),2&t&&(r.jc("ngSwitch",e.currentStatus),r.Cb(4),r.jc("ngSwitchCase",e.Status.loaded),r.Cb(1),r.jc("ngSwitchCase",e.Status.loading))},directives:[h.m,u.a,b.a,h.n,g,h.i,h.j,h.k,p.q,f.b],styles:['.dialog[_ngcontent-%COMP%]{position:relative}.close[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]{color:var(--text-color)}.close[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;z-index:10}.content[_ngcontent-%COMP%]{position:relative;padding:24px;overflow-y:auto}.episode-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100px}.background[_ngcontent-%COMP%]{position:absolute;height:300px;top:0;left:0;width:100%;z-index:0}.background[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.background[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,var(--secondary-background-alpha) 0,var(--secondary-background) 100%)}.favorite[_ngcontent-%COMP%]{color:var(--primary)}.header[_ngcontent-%COMP%]{display:flex;padding:15px 0;overflow:hidden;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;object-fit:cover;height:210px;border-radius:10px;box-shadow:0 6px 11px 0 rgba(0,0,0,.34)}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;color:var(--text-color);margin:20px}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:7px;overflow:hidden;max-lines:2;text-overflow:ellipsis}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--secondary-text-color);font-size:16px}.buttons[_ngcontent-%COMP%]{margin:20px 0;display:flex;align-items:center;justify-content:center}.genres-container[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;overflow-x:auto}.genre[_ngcontent-%COMP%]{border:1px solid var(--primary);padding:3px 10px;border-radius:20px;color:var(--primary);margin-right:10px;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content}.synopsis-container[_ngcontent-%COMP%]{margin-bottom:20px;font-size:15px;display:flex;flex-direction:column}.synopsis-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:43px;overflow:hidden}.synopsis-container[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.synopsis-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}.loading[_ngcontent-%COMP%]{width:100%;height:90vh;display:flex;align-items:center;justify-content:center}.episode[_ngcontent-%COMP%]{padding:15px;cursor:pointer;font-size:15px;transition:background-color .3s ease}.episode[_ngcontent-%COMP%]:hover{background-color:var(--secondary-background-lighter)}@media (max-width:600px){.header[_ngcontent-%COMP%]{flex-direction:column}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:0}}']}),t})()},sJtc:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"b",function(){return o});class n{constructor(t=s.Anime,e=[],i=[],n=o.loading){this.type=t,this.animeList=e,this.episodeList=i,this.currentStatus=n}}var s=function(t){return t[t.Anime=0]="Anime",t[t.Episode=1]="Episode",t}({}),o=function(t){return t[t.loading=0]="loading",t[t.loaded=1]="loaded",t[t.error=2]="error",t[t.empty=3]="empty",t}({})}}]);